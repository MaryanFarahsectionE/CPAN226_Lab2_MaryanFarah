The buffer uses a dictionary to store packets that arrive out of order. Each packet has a sequence number. When a packet arrives, the server checks its sequence number. If the number matches what the server expects next, the server writes the packet to the file. The server then checks if any buffered packets can now be written in order. If a packet arrives too early, the server stores it in the buffer. If a packet arrives too late, the server discards it as a duplicate. This ensures all packets are written in the correct sequence.
